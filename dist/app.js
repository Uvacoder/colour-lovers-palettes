angular.module("App",["ngAnimate","LocalStorageModule"]).config(["$animateProvider",function($animateProvider){$animateProvider.classNameFilter(/cl-animate/)}]),angular.module("App").factory("ColourLoversApi",function($http){var exports,API_BASE_PATH,API_PALETTES_PATH,CALLBACK;return exports={},API_BASE_PATH="https://www.colourlovers.com/api/",API_PALETTES_PATH=API_BASE_PATH+"palettes/",API_FORMAT="format=json",CALLBACK="&jsonCallback=JSON_CALLBACK",exports.getRandomPalette=function(){var url,params;return params="random?",url=API_PALETTES_PATH+params+API_FORMAT+CALLBACK,$http({method:"JSONP",url:url})},exports.getRandomPaletteByColor=function(color){var url,params,offset;return offset=0,params="?hex="+color+"&numResults=20&resultOffset="+offset+"&",url=API_PALETTES_PATH+params+API_FORMAT+CALLBACK,$http({method:"JSONP",url:url})},exports}),angular.module("App").factory("Utils",function(){var Utils={};return Utils.hexToRgb=function(color){var r,g,b;return r=parseInt(color.slice(0,2),16),g=parseInt(color.slice(2,4),16),b=parseInt(color.slice(4,6),16),{r:r,g:g,b:b}},Utils.rgbToHsl=function(r,g,b){var h,s,r=r/255,g=g/255,b=b/255,max=Math.max(r,g,b),min=Math.min(r,g,b),l=(max+min)/2;if(max===min)h=s=0;else{var d=max-min;switch(s=l>.5?d/(2-max-min):d/(max+min),max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4}h/=6}return{h:Math.round(360*h),s:Math.round(100*s),l:Math.round(100*l)}},Utils}),angular.module("App").controller("AppController",["$scope","localStorageService","ColourLoversApi",function($scope,localStorageService,ColourLoversApi){function loadPalette(palette){appController.data=palette}function randomPalette(){appController.loading=!0,ColourLoversApi.getRandomPalette().then(function(response){loadPalette(response.data[0]),appController.loading=!1},function(error){appController.loading=!1})}function savePalette(paletteData){var palettes=localStorageService.get("Palettes");if(palettes){if(palettes.some(function(palette){return paletteData.id===palette.id}))return;palettes.push(paletteData),localStorageService.set("Palettes",palettes),appController.savedPalettesData=palettes}else localStorageService.set("Palettes",[paletteData]),appController.savedPalettesData=[paletteData];loadPalette(paletteData),$scope.$broadcast("liked",paletteData)}function removePalette(paletteData){appController.savedPalettesData=appController.savedPalettesData.filter(function(savedPalette){return savedPalette.id!==paletteData.id}),localStorageService.set("Palettes",appController.savedPalettesData),loadPalette(paletteData),$scope.$broadcast("unliked",paletteData)}var appController=this;appController.data=null,appController.savedPalettesData=null,appController.loading=!0,$scope.$on("loadPalette",function(event,palette){loadPalette(palette)}),$scope.$on("randomPalette",randomPalette),$scope.$on("savePalette",function(event,palette){savePalette(palette)}),$scope.$on("removePalette",function(event,palette){removePalette(palette)}),function(){randomPalette(),localStorageService.get("Palettes")?appController.savedPalettesData=localStorageService.get("Palettes"):(localStorageService.set("Palettes",[]),appController.savedPalettesData=[])}()}]),angular.module("App").filter("colorContrast",["Utils",function(Utils){var getBrightness=function(rgb){var sum=rgb.r+rgb.g+rgb.b;return Math.round(sum/765*100)};return function(color){var rgb=Utils.hexToRgb(color);return getBrightness(rgb)<50?"dark":""}}]),angular.module("App").filter("hexToRgba",["Utils",function(Utils){return function(color){var rgb=Utils.hexToRgb(color);return"rgba("+rgb.r+", "+rgb.g+", "+rgb.b+", 1)"}}]),angular.module("App").filter("hexToHsl",["Utils",function(Utils){return function(color){var rgb=Utils.hexToRgb(color),hsl=Utils.rgbToHsl(rgb.r,rgb.g,rgb.b);return"hsla("+hsl.h+", "+hsl.s+"%, "+hsl.l+"%, 1)"}}]),angular.module("App").filter("untitled",function(){return function(value){return value||"Untitled"}}),angular.module("App").directive("info",function(){return{restrict:"E",templateUrl:"src/scripts/directives/info/info.html",link:function($scope,$element){$scope.$on("toggleInfo",function(){$element.toggleClass("active"),$scope.$broadcast("hideSavedPalettes")}),$scope.$on("hideInfo",function(){$element.removeClass("active")})}}}),angular.module("App").directive("likedFeedback",["$animate",function($animate){return{restrict:"E",templateUrl:"src/scripts/directives/liked-feedback/liked-feedback.html",link:function($scope,$element){var likedElement,unlikedElement;likedElement=$element[0].querySelector(".liked-feedback"),unlikedElement=$element[0].querySelector(".unliked-feedback"),$scope.$on("liked",function(){$animate.addClass(likedElement,"animate").then(function(){likedElement.classList.remove("animate")})}),$scope.$on("unliked",function(){$animate.addClass(unlikedElement,"animate").then(function(){unlikedElement.classList.remove("animate")})})}}}]),angular.module("App").directive("onClickFocus",function(){return{restrict:"A",scope:{},link:function($scope,$element){$element.bind("click",function(){this.select()})}}}),angular.module("App").directive("palette",function(){return{restrict:"E",scope:{colors:"="},templateUrl:"src/scripts/directives/palette/palette.html"}}),angular.module("App").directive("paletteInfo",["$rootScope",function($rootScope){return{restrict:"E",scope:{infoData:"=",savedPalettes:"="},templateUrl:"src/scripts/directives/palette-info/palette-info.html",link:function(scope,elem){var infoButton,savedPalettesButton;infoButton=elem[0].querySelector(".toggle-info-button"),savedPalettesButton=elem[0].querySelector(".toggle-saved-palettes-button"),infoButton.addEventListener("click",function(){infoButton.classList.toggle("active"),savedPalettesButton.classList.remove("active"),$rootScope.$broadcast("toggleInfo")},!1),savedPalettesButton.addEventListener("click",function(){savedPalettesButton.classList.toggle("active"),infoButton.classList.remove("active"),$rootScope.$broadcast("toggleSavedPalettes")},!1),scope.randomPalette=function(){$rootScope.$broadcast("randomPalette")},scope.likePalette=function(palette){$rootScope.$broadcast("savePalette",palette)},scope.unlikePalette=function(palette){$rootScope.$broadcast("removePalette",palette)}}}}]),angular.module("App").directive("savedPalettes",function(){return{restrict:"E",scope:{palettes:"="},templateUrl:"src/scripts/directives/saved-palettes/saved-palettes.html",link:function($scope,$element){$scope.loadPalette=function(palette){$scope.$emit("loadPalette",palette)},$scope.$on("toggleSavedPalettes",function(){$element.toggleClass("active"),$scope.$emit("hideInfo")}),$scope.$on("hideSavedPalettes",function(){$element.removeClass("active")})}}});